
{% extends 'base.html' %}
{% load static %}

{% block title %}Super-Dashboard{% endblock title %}

{% block dashboard %}

<body class="font-sans bg-gray-100 text-gray-900" xmlns="http://www.w3.org/1999/html">

    <!-- Navbar -->
    {% include "components/navbar_associacao.html" %}

  <!-- Container geral para o conteúdo -->
  <div class="flex flex-col min-h-screen max-w-7xl mx-auto px-6 py-8">
    {% if messages %}
    <div class="mb-4">
        {% for message in messages %}
            <div class="p-4 rounded-md text-white 
                {% if message.tags == 'success' %}
                    bg-green-500
                {% elif message.tags == 'error' %}
                    bg-red-500
                {% elif message.tags == 'info' %}
                    bg-blue-500
                {% else %}
                    bg-gray-500
                {% endif %}
            ">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
    <!-- Área de conteúdo principal -->
    <div class="flex-1 p-6">
        <div class="text-gray-400">Super-Dashboard</div>      
      <!-- Painéis de dados -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">

        <!-- Painel de Associados -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-gray-800">Associados Cadastrados</h3>
          <div class="mt-4 text-5xl font-bold text-blue-500">{{ total_associados }}</div>
          <div class="mt-2 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <div class="grid grid-cols-2 gap-y-2">
              <div>
                <p class="font-medium text-gray-700">Ativos:</p>
                <p><strong class="text-blue-600 text-sm mt-2">{{ associados_ativos }}</strong></p>

              </div>
              <div>
                <p class="font-medium text-gray-700">Aposentados:</p>
                <p><strong class="text-purple-600 text-sm mt-2">{{ associados_aposentados }}</strong></p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Clientes Especiais:</p>
                <p><strong class="text-yellow-600 text-sm mt-2">{{ associados_especiais }}</strong></p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Candidatos</p>
                <p>{{ total_candidatos }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Painel de Embarcações -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-gray-800">Embarcações Cadastradas</h3>
          <div class="mt-4 text-5xl font-bold text-blue-500">0</div>
          <div class="mt-2 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <div class="grid grid-cols-2 gap-y-2">
              <div>
                <p class="font-medium text-gray-700">Motor:</p>
                <p>0</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Vela:</p>
                <p>0</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Outra Info:</p>
                <p>0</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Painel de Licenças -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-gray-800">Licenças Cadastradas</h3>
          <div class="mt-4 text-5xl font-bold text-blue-500">0</div>
          <div class="mt-2 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <div class="grid grid-cols-2 gap-y-2">
              <div>
                <p class="font-medium text-gray-700">Tipo I:</p>
                <p>0</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Tipo II:</p>
                <p>0</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Tipo III:</p>
                <p>0</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Tipo IV:</p>
                <p>0</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Painel de Relatórios -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-gray-800">Admin</h3>
          <div class="mt-4 text-4xl font-bold text-blue-500">Receitas</div>
          <div class="mt-4 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <ul class="space-y-3">
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                  <i class="material-icons mr-2">assessment</i>
                  Relatório de pagamentos
                </a>
              </li>
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                  <i class="material-icons mr-2">pending_actions</i>
                  Relatório de pendentes
                </a>
              </li>
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                  <i class="material-icons mr-2">request_quote</i>
                  Gerar boleto anuidades
                </a>
              </li>
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                  <i class="material-icons mr-2">settings</i>
                  Configurar Taxas
                </a>
              </li>
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                  <i class="material-icons mr-2">send</i>
                  Enviar cobrança
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Painel de Artigo -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-black-600">Artigos</h3>
          {% if total_articles %}
            <div class="mt-4 text-5xl font-bold text-blue-500">{{total_articles}}</div>
          {% else %}
            <p>Nenhum artigo encontrado.</p>
          {% endif %}
          <div class="mt-4 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <ul class="space-y-2">
              {% for article in articles %}
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-orange-600 transition-colors">
                  <i class="material-icons mr-2">check_circle</i>
                  {{article.title}}
                </a>
              </li>
              {% endfor %}
              <!-- Additional Tarefas links -->
            </ul>
          </div>
        </div>


        <!-- Painel de Tarefas -->
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-auto">
          <h3 class="text-xl font-semibold text-black-600">Tarefas</h3>
          {% if total_tarefas %}
            <div class="mt-4 text-5xl font-bold text-blue-500">{{total_tarefas}}</div>
          {% else %}
            <p>Nenhuma tarefa encontrada.</p>
          {% endif %}
          <div class="mt-4 text-sm text-gray-600">
            <hr class="my-3 border-gray-300">
            <ul class="space-y-2">
              {% for tarefa in tarefas %}
              <li>
                <a href="#" class="flex items-center text-gray-700 hover:text-orange-600 transition-colors">
                  <i class="material-icons mr-2">check_circle</i>
                  {{tarefa.titulo}}
                </a>
              </li>
              {% endfor %}
              <!-- Additional Tarefas links -->
            </ul>
          </div>
        </div>
    </div>

    <div class="bg-gray-100 py-6">
        <!-- Container Principal do Painel -->
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <!-- Cabeçalho do Painel -->
            <!-- Sessão 1 -->
            <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
              <h3 class="text-gray-700 font-semibold text-sm mb-4">Lista de Mensagens</h3>
              <a href="{% url 'app_home:list_mensagens' %}" class="flex items-center text-blue-700 hover:text-orange-600 transition-colors">
                <i class="material-icons mr-2">check_circle</i>
                Ver Lista de Mensagens
              </a>
              <br>
              <div class="overflow-x-auto">
                  <table class="min-w-full bg-white rounded-lg shadow-md">
                      <thead>
                          <tr class="bg-gray-200 text-gray-600 text-sm leading-normal">
                              <th class="py-3 px-6 text-left">Nome</th>
                              <th class="py-3 px-6 text-left">Celular</th>
                              <th class="py-3 px-6 text-left">Email</th>
                              <th class="py-3 px-6 text-left">Mensagem</th>
                          </tr>
                      </thead>
                      <tbody class="text-gray-600 text-sm font-light">
                          {% for lead in leads %}
                          <tr class="border-b border-gray-200 hover:bg-gray-100">
                              <td class="py-3 px-6 text-left whitespace-nowrap">{{ lead.nome }}</td>
                              <td class="py-3 px-6 text-left whitespace-nowrap">{{ lead.celular }}</td>
                              <td class="py-3 px-6 text-left whitespace-nowrap">{{ lead.email }}</td>
                              <td class="py-3 px-6 text-left">{{ lead.mensagem }}</td>
                          </tr>
                          {% empty %}
                          <tr>
                              <td colspan="4" class="py-3 px-6 text-center text-gray-500">Nenhuma mensagem encontrada.</td>
                          </tr>
                          {% endfor %}
                      </tbody>
                  </table>
              </div>
            </div>

          </div>
          <br>
            <!-- Cabeçalho do Painel -->
            <div class="bg-gray-200 py-4 px-6">
              <h2 class="text-lg font-semibold">Painel</h2>
              <p class="text-sm">Informações detalhadas e organizadas</p>
          </div>          
            <!-- Corpo do Painel -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
                <!-- Sessão 1 -->
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <h3 class="text-gray-700 font-semibold text-sm">Quadro de Integrantes</h3>
                    <p class="text-gray-600 text-sm mt-2">
                        Integrantes Operando: <strong class="text-blue-600 text-sm mt-2">{{ total_integrantes }}</strong>
                    </p>
                    <p class="text-gray-600 text-sm mt-2">
                      Ex-Integrantes: <strong class="text-red-600 text-sm mt-2">{{ ex_integrantes }}</strong>
                    </p>

                </div>

                <!-- Sessão 2 -->
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <h3 class="text-gray-700 font-semibold text-sm">Sessão 2</h3>
                    <p class="text-gray-600 text-sm mt-2">
                        Outro espaço para mais informações que você deseja exibir neste painel.
                    </p>
                </div>

                <!-- Sessão 3 -->
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <h3 class="text-gray-700 font-semibold text-sm">Sessão 3</h3>
                    <p class="text-gray-600 text-sm mt-2">
                        Adicione informações adicionais ou links relevantes nesta seção.
                    </p>
                </div>

                <!-- Sessão 4 -->
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                    <h3 class="text-gray-700 font-semibold text-sm">Sessão 4</h3>
                    <p class="text-gray-600 text-sm mt-2">
                        Um espaço final para qualquer outra coisa que você queira destacar.
                    </p>
                </div>
            </div>

            <!-- Rodapé do Painel -->
            <div class="bg-gray-100 py-3 px-6 text-center text-sm text-gray-600">
                Informações atualizadas recentemente.
            </div>
        </div>

    <!-- Painel de Detalhes com tabelas adicionais -->
    <div class="bg-gray-100 p-8 mt-12 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold text-gray-800 text-center mb-8">Associações</h2>

      <p class="mt-2 text-gray-600">Contagem de associados por associação.</p>
      <div class="overflow-x-auto mt-4">
          <table class="min-w-full bg-white border border-gray-300 rounded-md">
              <thead class="bg-gray-100">
                  <tr>
                      <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Associação</th>
                      <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Associados</th>
                  </tr>
              </thead>
              <tbody>
                  {% for associacao in associados_por_associacao %}
                      <tr class="border-b">
                          <td class="py-2 px-4">{{ associacao.associacao__nome_fantasia }}</td>
                          <td class="py-2 px-4">{{ associacao.associados_count }}</td>
                      </tr>
                  {% empty %}
                      <tr>
                          <td colspan="2" class="py-2 px-4 text-center text-gray-500">Nenhuma associação encontrada.</td>
                      </tr>
                  {% endfor %}
              </tbody>
          </table>
      </div>
    </div>
    <!-- Painel de Detalhes com tabelas adicionais -->
    <div class="bg-gray-100 p-8 mt-12 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold text-gray-800 text-center mb-8">Repartições e Municípios</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">

        <!-- Tabela de Repartições -->
        <div>
          <h3 class="text-xl font-semibold text-gray-800">Repartições</h3>
          <div>
            <p class="mt-2 text-gray-600">Contagem de associados por repartição.</p>
          </div>
          <div class="overflow-x-auto mt-4">
            <table class="min-w-full bg-white border border-gray-300 rounded-md">
              <thead class="bg-gray-100">
                <tr>
                  <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Repartição</th>
                  <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Associados</th>
                </tr>
              </thead>
              <tbody>
                    {% for reparticao in associados_por_reparticao %}
                        <tr class="border-b">
                            <td class="py-2 px-4">{{ reparticao.reparticao__nome_reparticao }}</td>
                            <td class="py-2 px-4">{{ reparticao.associados_count }}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="2" class="py-2 px-4 text-center text-gray-500">Nenhuma repartição encontrada.</td>
                        </tr>
                    {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tabela de Municípios de Circunscrição -->
        <div>
          <h3 class="text-xl font-semibold text-gray-800">Municípios de Circunscrição</h3>
          <p class="mt-2 text-gray-600">Contagem de associados por município.</p>
          <div class="overflow-x-auto mt-4">
            <table class="min-w-full bg-white border border-gray-300 rounded-md">
              <thead class="bg-gray-100">
                <tr>
                  <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Município</th>
                  <th class="py-3 px-4 border-b text-left text-gray-700 font-semibold">Associados</th>
                </tr>
              </thead>
              <tbody>
                {% for municipio in associados_por_municipio_circunscricao %}
                    <tr class="border-b">
                        <td class="py-2 px-4">{{ municipio.municipio_circunscricao__municipio }}</td>
                        <td class="py-2 px-4">{{ municipio.associados_count }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="2" class="py-2 px-4 text-center text-gray-500">Nenhum município encontrado.</td>
                    </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<div class="flex flex-col min-h-screen max-w-7xl mx-auto px-6 py-8">
  <div class="flex-1 p-6">
  <!-- Bloco separado -->
  <div class="bg-gray-50 py-8 px-6 rounded-lg shadow-inner">
    <!-- Título Geral -->
    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">Painel de Métricas</h3>

    <!-- Grid Responsivo em 2 colunas -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Gráfico de Associados por Repartição -->
      <div class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Associados por Repartição</h3>
        <canvas id="chartReparticoes" class="w-full h-60"></canvas>
      </div>
      <!-- Gráfico de Associados por Municípios -->
      <div class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Associados Por Municípios</h3>
        <canvas id="chartMunicipios" class="w-full h-60"></canvas>
      </div>

      <!-- Gráfico de Associados por Gênero -->
      <div class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Associados por Gênero</h3>
        <canvas id="chart2" class="w-full h-60"></canvas>
      </div>

      <!-- Gráfico de Associados Por Status -->
      <div class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Associados Por Status</h3>
        <canvas id="chartStatus" class="w-full h-60"></canvas>
      </div>

    </div>
  </div>
</div>
</div>



</body>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="{% static 'js/chartReparticoes.js' %}"></script>
<script>
  const associadosHomens = {{ associados_homens }};
  const associadosMulheres = {{ associados_mulheres }};
  const associadosIndefinidos = {{ associados_indefinidos }};
</script>
<script src="{% static 'js/chartGenero.js' %}"></script>
<script>
  const associadosPorReparticao = {{ associados_por_reparticao_json|safe }};
</script>
<script src="{% static 'js/chartReparticoes.js' %}"></script>
<!-- Dados para o gráfico -->
<script>
  const associadosPorStatus = {{ associados_por_status_json|safe }};
</script>
<script src="{% static 'js/chartStatus.js' %}"></script>
<!-- Dados para o gráfico -->
<script>
  const associadosPorMunicipio = {{ associados_por_municipio_circunscricao_json|safe }};
</script>
<script src="{% static 'js/chartMunicipios.js' %}"></script>

 <!-- Footer -->
  {% include "components/footer_associacao.html" %}
{% endblock dashboard %}
